# UI theming overhaul: next-themes provider, accent palettes, animations, 3D background, and page transitions

## Summary
This PR upgrades the UI experience across the app with proper light/dark theming, selectable accent palettes, smooth animations, and an optional low-cost 3D background. It also adds user controls for animations/3D and improves consistency (RTL-friendly, token-based colors).

## Key changes
- App theming
  - Wrap app with next-themes ThemeProvider: attribute="data-theme", defaultTheme="system", storageKey="theme".
  - ThemeClassSync ensures both `data-theme` and `class="dark"` stay in sync for Tailwind/globals.
  - ThemeToggle now uses `useTheme()` from next-themes (no manual localStorage logic).
- Accent palettes (emerald, cyan, purple, amber, rose, indigo)
  - CSS variables in HSL; switch via `data-accent` on `<html>`, e.g. `data-accent="rose"`.
  - New ThemeCustomizer (Dialog) to pick palette; choice stored in localStorage and applied to `document.documentElement`.
  - Default accent palette set to `rose` for new sessions.
- Animations and transitions
  - Global PageTransition wrapper with framer-motion (enter/exit fade+translate).
  - Utility animations (float, glow, shimmer, hover-lift) expanded and respect `prefers-reduced-motion`.
- 3D background (optional, md+ only)
  - Added `three`, `@react-three/fiber`, `@react-three/drei`.
  - Background3D rendered via dynamic import (no SSR), simple icosahedron with soft lights.
  - Auto-fallback to AnimatedShapes (SVG) on low-power or when animations disabled.
  - Performance guard: FPS probe to switch to `frameloop='demand'` and lower DPR if needed.
- Navigation
  - Added ThemeCustomizer button next to ThemeToggle/AuthButton.
  - Updated header tokens to use theme colors (accent/primary).
- Settings (/settings)
  - Added toggles to enable/disable animations and 3D background; persisted to localStorage (`enable_animations`, `enable_3d`).
- Global CSS / Tailwind
  - Migrated color variables to HSL and added `--sidebar-background` to match tailwind.config.
  - Accent palette rules updated to HSL for light/dark.
  - bg-gradient-warm/primary/secondary use CSS variables; removed static gradients from pages.
  - Kept `tw-animate-css` import and installed the package.
- Page updates (tokenize colors + gradient)
  - Replaced hardcoded emerald/amber/cyan classes with theme tokens in: dashboard, lessons, admin, questions.
  - Switched static background gradients to `bg-gradient-warm`.
  - Verified RTL and Arabic labels remain intact.
- Deployment
  - Added `netlify.toml` for Netlify build using `@netlify/plugin-nextjs`.

## Files touched (highlights)
- app/layout.tsx – ThemeProvider + VisualBackground + PageTransition + default `data-accent="rose"`.
- app/globals.css – HSL variables, palettes, gradients, animations, and base tokens.
- components/theme-provider.tsx – next-themes provider + ThemeClassSync.
- components/theme-toggle.tsx – next-themes `useTheme()`.
- components/theme/theme-customizer.tsx – accent picker dialog.
- components/visuals/* – Background3D + AnimatedShapes + VisualBackground.
- components/navigation/navigation.tsx – integrated ThemeCustomizer and token colors.
- app/{dashboard,lessons,lessons/[id],admin,questions}/page.tsx – tokenized colors + gradient.
- app/settings/page.tsx – animations/3D toggles persisted to localStorage.
- netlify.toml – Next.js plugin and build settings.

## Impact
- Seamless light/dark switching across pages.
- User-selectable accent palettes with persistent choice.
- Polished animations with respect for accessibility (reduced motion).
- Optional 3D background that degrades gracefully.
- No data model or RLS changes.

## Verification checklist
- Switch between light/dark via ThemeToggle.
- Pick different accent palettes in ThemeCustomizer (rose, emerald, etc.).
- Check pages: dashboard, lessons, admin, questions – colors follow palette and gradients use `bg-gradient-warm`.
- Verify prefers-reduced-motion disables heavy effects.
- On md+ screens, 3D background appears; on low-power or disabled animations, fallback SVG shows.
- Netlify: set env vars `NEXT_PUBLIC_SUPABASE_URL` + `NEXT_PUBLIC_SUPABASE_ANON_KEY`; build succeeds.

## Notes
- Some other pages (games/media/settings/home) can be fully tokenized similarly on request.


₍ᐢ•(ܫ)•ᐢ₎ Generated by [Capy](https://capy.ai) ([view task](https://capy.ai/project/572f7aab-84af-11f0-a94e-3eef481a796b/task/2c25060a-ee34-48bc-999b-f83270680363))